<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rage House Scoring</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- Top Nav -->
  <header class="topbar">
    <div class="brand">
      <span class="brandTitle">Rage House Scoring</span>
    </div>

    <nav class="nav">
      <button id="navScoreboard" class="navBtn active">Scoreboard</button>
      <button id="navGames" class="navBtn">Games</button>
      <button id="navAllGames" class="navBtn">All Games</button>
    </nav>

    <div class="actions">
      <button id="unlockBtn" class="navBtn">ðŸ”’ Staff Locked</button>
    </div>
  </header>

  <!-- PIN MODAL -->
  <div id="pinModal" class="modal" style="display:none;">
    <div class="modalCard">
      <h2>Staff Unlock</h2>
      <p class="muted">Enter PIN to unlock staff controls.</p>

      <input id="pinInput" type="password" inputmode="numeric" placeholder="PIN" />
      <div id="pinMsg" class="error"></div>

      <div class="row">
        <button id="pinOkBtn">Unlock</button>
        <button id="pinCancelBtn" class="btnGhost">Cancel</button>
      </div>
    </div>
  </div>

  <main class="container">

    <!-- SCOREBOARD PAGE -->
    <section id="pageScoreboard">

      <!-- Idle / Attract overlay (logo + lane) -->
      <div id="idleOverlay" class="idleOverlay" style="display:none;">
        <div class="idleCard">
          <img id="idleLogo" src="images/logo.png" alt="Rage House Logo" />
          <div id="idleLane" class="idleLane">Lane 1</div>
          <div class="idleHint">Staff unlock to start</div>
          <button id="idleUnlockBtn" style="margin-top:14px;">Staff Unlock</button>

        </div>
      </div>

      <!-- Session bar -->
      <div id="sessionBar" class="sessionBar">
        <div><strong id="laneLabel">Lane 1</strong></div>
        <div id="timerLabel">Timer: --:--</div>
      </div>

      <!-- Session ended overlay -->
      <div id="sessionEndedOverlay" class="sessionEndedOverlay" style="display:none;">
        <div class="sessionEndedCard">
          <h2>Session ended</h2>
          <p>Staff unlock required to start a new session.</p>
          <button id="newSessionBtn">Start New Session</button>
        </div>
      </div>

      <!-- Target + scoring -->
      <div class="grid2">

        <div class="card targetCard">
          <div class="cardTitle">Target</div>

          <div class="targetWrap">
            <img id="gameImage" alt="Game target" />
            <!-- SVG overlay for clickable score buttons -->
            <svg id="overlay" class="overlaySvg" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid meet"></svg>
          </div>

          <div class="row" style="margin-top:12px;">
            <button id="undoBtn">Undo</button>
            <button id="missBtn" class="btnGhost">Miss</button>
            <button id="missOnBoardBtn" class="btnGhost">Miss (On Board)</button>
          </div>
        </div>

        <div class="card scoreCard">
          <div class="cardTitle">Scoreboard</div>
          <div id="statusText" class="muted" style="margin-bottom:10px;"></div>
          <div id="scoreboard"></div>
        </div>

      </div>
    </section>

    <!-- GAMES PAGE -->
    <section id="pageGames" style="display:none;">
      <div class="card">
        <h2>Game Setup (Staff Only)</h2>

        <div class="row">
          <div class="field">
            <label>Lane</label>
            <select id="laneSelect">
              <option>Lane 1</option>
              <option>Lane 2</option>
              <option>Lane 3</option>
              <option>Lane 4</option>
              <option>Lane 5</option>
              <option>Lane 6</option>
              <option>Lane 7</option>
              <option>Lane 8</option>
            </select>
          </div>

          <div class="field">
            <label>Game</label>
            <select id="gameSelect"></select>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Rounds</label>
            <input id="roundsInput" type="number" min="1" max="20" value="3" />
          </div>

          <div class="field">
            <label>Throws per Round</label>
            <input id="throwsInput" type="number" min="1" max="30" value="7" />
          </div>
        </div>

        <div class="row">
          <button id="applyGameBtn">Apply Game Settings</button>
          <button id="startNewGameBtn" class="btnGhost">Start New Game (Clear Scores)</button>
        </div>

        <hr class="sep" />

        <div class="row">
          <button id="teamModeBtn">Team Mode: OFF</button>
          <button id="kioskBtn" class="btnGhost">Enter Kiosk (Fullscreen)</button>
        </div>

        <hr class="sep" />

        <div class="row">
          <div class="field">
            <label>Session Timer (minutes)</label>
            <input id="sessionMinutes" type="number" min="1" max="180" value="60" />
          </div>
          <div class="field">
            <label>&nbsp;</label>
            <div class="row">
              <button id="startTimerBtn">Start Timer</button>
              <button id="stopTimerBtn" class="btnGhost">Stop Timer</button>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="field" style="flex:1;">
            <label>Customer Email (optional)</label>
            <input id="customerEmail" type="email" placeholder="customer@email.com" />
          </div>
        </div>

        <div class="row">
          <button id="exportPngBtn">Export Results PNG (Instagram)</button>
          <button id="emailResultsBtn" class="btnGhost">Email Results</button>
        </div>
      </div>

      <div class="card" style="margin-top:14px;">
        <h2>Players (Staff Only)</h2>

        <div class="row">
          <input id="newPlayerName" placeholder="New player name" />
          <button id="addPlayerBtn">Add Player</button>
        </div>

        <div id="playersList" style="margin-top:10px;"></div>
        <p class="muted" style="margin-top:10px;">Tip: Team dropdowns only work when Team Mode is ON.</p>
      </div>
    </section>

    <!-- ALL GAMES PAGE (optional placeholder) -->
    <section id="pageAllGames" style="display:none;">
      <div class="card">
        <h2>All Games</h2>
        <p class="muted">This page is reserved for future features (adding custom games, editing hit zones, etc.).</p>
      </div>
    </section>

  </main>

  <!-- html2canvas for Instagram export -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="script.js"></script>

</body>
</html>
